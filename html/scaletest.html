<html>
<head>
	<script src="/socket.io/socket.io.js"></script>
    <script>
		var players = [];

		function addPlayer() {
        	var player = {};
			player.socket = io.connect('/players', {'force new connection': true});
			player.socket.emit("namechange", "Loren Carpenter " + Math.floor(Math.random()*9999));
			players.push(player);
		}

		function emit() {
			for (p in players) {
				if (Math.round(Math.random()) == 0) {
					players[p].socket.emit("left");
					document.getElementById("dots").innerHTML += "l";
				} else {
					players[p].socket.emit("right");
					document.getElementById("dots").innerHTML += "r";
				}	
			}

			setTimeout(emit, 100);
		}

		// kick it off
		emit();

	</script>
</head>
<body>
<h1> Scalability test </h1>
<input type=button onclick="addPlayer()" value="Add Player" />
<div id="dots">
rah rah
</div>
</body>
</html>
