<html>
<head>
	<title>Mass Mobile Hallucination</title>
	<script src="/socket.io/socket.io.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
	<script>
		var socket = io.connect('/control');

		// An admin function that goes to the players
		function throttle() {
			var frequency = document.getElementById('frequency').value;
			socket.emit("admin", { control: "changeSettings", data: {freq: frequency}});
		}
		
		// Tells the whole system to change the game to a different one. Effects the 
		// playfield and the player
		function changeGame(theGame) {
			socket.emit("changeGame", theGame);
		}

        function  changePongSettings(){
            var settings = document.getElementById('pongSettings').value;
            var data = eval('(' + settings + ')');
            sendAdminMessageToPlayfield(data);
        }

        function  sendAdminMessageToPlayfield(settings){
            socket.emit("playfield_admin", { control: "changeSettings", data: settings});
        }
	</script>
</head>
<body bgcolor="#ffccee">
	<h1>Controller</h1>
	<div>
	Message Sending Frequency<input type="text" id="frequency" value="40"/> 
		<input type=button value ="Set Throttle" onclick="throttle()" /> 
	</div>
	<div>
		Choose a game (e.g., main, next) 
			<input type=button onclick="changeGame('fairy')" value="Fairy Game" />
			<input type=button onclick="changeGame('worm')" value="The Worm game" />
			<input type=button onclick="changeGame('color')" value="Color Selection Game" />
            <input type=button onclick="changeGame('pong')" value="Pong" />
			<input type=button onclick="changeGame('millionaire')" value="Who wants to be a millionaire?" />

	</div>

    <br /><br />
    <div>
    Send an admin message to the playfield!
    </div>
    <textarea id = "pongSettings" rows="10" cols="30">{game:'pong',ballRadius:10,dx:.75,dy:1.5,paddleHeight:150,paddleWidth:36}</textarea>
    <input type=button onclick="changePongSettings();" value="Send message to playfield" />

</body>
</html>

