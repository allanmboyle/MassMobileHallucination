<div> load test client </div>

<script>
	var SEND_FREQUENCY = 40;
    var loadTestPlayers = [];
    var sendLoadDataTimer;

    function initClient(){

		var data = {};
		data.usercount = 5;
		createLoadTestUser(data);
		sendLoadDataTimer = setInterval(sendLoadTestData, SEND_FREQUENCY);

		socket.on('changeTestSettings', function (data) {
		    alert(JSON.stringify(data));
		});
    }

    function createLoadTestUser(data)
    {
		for (i = 0; i < data.usercount; i++) {

		    var player = {};
		    player.socket = io.connect('/players', {'force new connection': true});
		    player.socket.emit("namechange", "Loren Carpenter " + Math.floor(Math.random()*9999));
		    loadTestPlayers.push(player);
		}
    }

    function sendLoadTestData()
    {
		for (p in loadTestPlayers) {
		    // move them both up and down
		    accel = {
			tiltLR: Math.random()*180-90,
			tiltFB: Math.random()*180-90,
			dir: Math.random()*180,
			motionUD: Math.random()*90,
			playerLocation : "left"
		    }
		    loadTestPlayers[p].socket.emit("accel", accel);
		}
	}

	function stopClient() {
		clearInterval(sendLoadDataTimer);
	}
</script>