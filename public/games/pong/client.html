<style>
	.up_half { 
		height: 50%;
		width: 100%;
		overflow: hidden;
		margin: 0px;
		padding: 0px;
	}
	.down_half {
		height: 50%;
		width: 100%;
	}
	.left_side_up {
		background-color: FireBrick;
	}
	.left_side_down {
		background-color: IndianRed;
	}
	.right_side_up {
		background-color: ForestGreen;
	}
	.right_side_down {
		background-color: lightSeaGreen;
	}

	.big_word {
		color: midnightblue;
		position: relative;
		top: 10%;
		left: 10%;
		width: 80%;
		height: 80%;
		font-size: 60pt;
		opacity: 0.4;
		text-align: center;
		vertical-align: middle;
	}
 
	.pressed {
		border-style: inset;
		border-radius: 1px;
		border-color: black;
		opacity: 0.9;
	}
</style>

<div class="up_half"><div class="big_word">UP</div></div>
<div class="down_half"><div class="big_word">DOWN</div></div>

<script>
	var side;
	var lastTilt, nextTilt;

	function initClient() {
		// We don't want MMH to do anything
		setSideColors();
	    MMH.init(socket);
	    MMH.listenForMovements(pongValuesProcessor, postProcessor);
	}

	function stopClient() {
		MMH.stopListeningForMovements();
	}

	// The mmh detectors convert all detected values to +90 to -90. We want
	// that from +1 to -1 for pong becuase its only an up for down.
	function pongValuesProcessor(accel) {
		accel.tiltFB = (accel.tiltFB >= 0)? 1 : -1;
		nextTilt = accel.tiltFB;
		return accel;
	}

	function postProcessor() {
		if (nextTilt != lastTilt) {
			// if there is a new value
			if (nextTilt > 0)  { 
				$(".up_half .big_word").removeClass("pressed")
				$(".down_half .big_word").addClass("pressed")
			} else {
				$(".down_half .big_word").removeClass("pressed")
				$(".up_half .big_word").addClass("pressed")
			}
			lastTilt = nextTilt;

			// send to the server just the changes
			MMH.sendOrientationToServer();
		}
	}

	function setSideColors() {
		side = getPlayerLocation();
		if (side == "left") {
			$(".up_half").addClass("left_side_up");
			$(".down_half").addClass("left_side_down");
		} else {
			$(".up_half").addClass("right_side_up");
			$(".down_half").addClass("right_side_down");
		}
	}

</script>
